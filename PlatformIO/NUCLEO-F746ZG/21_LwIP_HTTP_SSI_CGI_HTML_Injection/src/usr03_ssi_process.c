/*
# ##############################################################################
# File: ur                                                                     #
# Project: src                                                                 #
# Created Date: Thursday, October 12th 2023, 2:37:20 am                        #
# Author: Zafeer Abbasi                                                        #
# ----------------------------------------------                               #
# Last Modified: Saturday, October 14th 2023, 8:37:07 am                       #
# Modified By: Zafeer Abbasi                                                   #
# ----------------------------------------------                               #
# Copyright (c) 2023 Zafeer.A                                                  #
# ----------------------------------------------                               #
# HISTORY:                                                                     #
 */

/*##############################################################################################################################################*/
/*INCLUDES______________________________________________________________________________________________________________________________________*/
/*##############################################################################################################################################*/

#include "usr03_ssi_process.h"
#include "lwip/apps/httpd.h"
#include <string.h>
#include "main.h"
#include "usr04_button.h"
#include "usr02_adc.h"
#include <stdbool.h>

/*##############################################################################################################################################*/
/*FUNCTION DECLARATIONS_________________________________________________________________________________________________________________________*/
/*##############################################################################################################################################*/



/*##############################################################################################################################################*/
/*GLOBALS_______________________________________________________________________________________________________________________________________*/
/*##############################################################################################################################################*/

char const * ssi_tags[] = {"TIME", "SENSOR", "BUTTON" };
char const ** tags =  ssi_tags;

/*##############################################################################################################################################*/
/*DEFINES_______________________________________________________________________________________________________________________________________*/
/*##############################################################################################################################################*/


/*##############################################################################################################################################*/
/*EXTERNS_______________________________________________________________________________________________________________________________________*/
/*##############################################################################################################################################*/

extern ADC_HandleTypeDef hADC1;

/*##############################################################################################################################################*/
/*TYPEDEFS/STRUCTS/ENUMS________________________________________________________________________________________________________________________*/
/*##############################################################################################################################################*/



/*##############################################################################################################################################*/
/*FUNCTIONS_____________________________________________________________________________________________________________________________________*/
/*##############################################################################################################################################*/

uint16_t SSI_SSIHandler(int iIndex, char *pcInsert, int iInsertLen)
{
	switch( iIndex )
	{
		case 0:
			sprintf(pcInsert, "%d SECONDS", (int)HAL_GetTick( )/1000 );
			return strlen(pcInsert);
			break;

		case 1:
			sprintf( pcInsert, "%0.1f&deg;C", ADC_getMCUTemp( ) );
			return strlen( pcInsert );
			break;	

		case 2:
			sprintf( pcInsert, "%s", BUTTON_getBtnState( ) );
			return strlen( pcInsert );
			break;

		default:
			break;	
	}
	return 0;
}
